<app-card [classCardHeader]="'bg-secondary text-white'">
  <ng-container card-header-title> Contrato Fijo</ng-container>
  <ng-container card-body>
    <div class="row" [formGroup]="form">
      <div class="col-xs-12 col-md-5" id="control_tipo_numero_interno_id">
        <app-select [control]="form.get('tipo_numero_interno_id')" label="Tipo Número interno">
          <ng-container options>
            <option value="null" selected disabled>Seleccione tipo</option>
            <ng-container *ngFor="let tipo of tiposNumeroInterno$ | async">
              <option [value]="tipo.id">
                {{ tipo.nombre }}
              </option>
            </ng-container>
          </ng-container>
        </app-select>
        <br>
      </div>
      <div class="col-xs-12 col-md-5" id="control_numero_interno" [formGroup]="formInterno">
        <app-input [control]="formInterno.get('numero_interno')" label="N° interno"></app-input>
      </div>
      <div class="col-xs-12 col-md-2" id="button-agregar" style="    align-self: center;
      margin-top: 14px;">
        <button [disabled]="!formInterno.valid" (click)="addNumeroInterno()">Agregar</button>
      </div>
    </div>
    <table style="margin-top:10px;width: 100%;">
      <tr>
        <th>Número interno</th>
        <th>OT asociada</th>
        <th></th>
      </tr>
      <tr *ngFor="let item of arrNumerosInternos; let i = index">
        <td>{{item.numero_interno}}</td>
        <td> <span *ngIf="item.ot.length>0"> {{item.ot|json}}</span>
          <span *ngIf="item.ot.length===0">No utilizado</span></td>
        <td><button (click)="deleteNumeroInterno(i);" class="btn btn-danger"><i class="pi pi-trash"></i></button></td>
      </tr>
    </table>

    <!-- <div class="row" *ngFor="let item of arrNumerosInternos; let i = index" style="border: 0.1rem solid #b5b2b2;
    border-radius: 5px;
    padding: 11px;
    margin-top: 13px;">
      <div class="col-sm-10 col-md-10">

        <span>{{item.numero_interno}}</span>

        <span *ngIf="item.ot.length>0">OT asociadas: {{item.ot|json}}</span>
        <span *ngIf="item.ot.length===0">OT asociadas: No utilizada</span>
      </div>
      <div class="col-sm-2 col-md-2">
        <button (click)="deleteNumeroInterno(i);" class="btn btn-danger"><i class="pi pi-trash"></i></button>
      </div>
    </div> -->

  </ng-container>
</app-card>

<!-- <ng-container formArrayName="numeros_internos">
    <div class="col-xs-12 col-md-6" id="control_numero_interno" style="border-left:1px solid #e5e5e5">
      <button (click)="addNumeroInterno();" class="btn btn-primary" style="margin-bottom: 10px;"><i class="pi pi-plus-circle"></i></button>
      <div *ngFor="let n of myFormArray().controls; let i = index">
        <ng-container [formGroupName]="i">
          <div class="row" style="margin-top:5px">
            <div class="col-md-10">
              <app-input [control]="myFormArray().controls[i].get('numero_interno')" label="N° interno" DisplayLabelMode="side"></app-input>
            </div>
            <div class="col-md-2">
              <button *ngIf="i!==0" (click)="deleteNumeroInterno(i);" class="btn btn-danger"><i class="pi pi-trash"></i></button>
            </div>
          </div>
        </ng-container>
      </div>
    </div>
  </ng-container> -->